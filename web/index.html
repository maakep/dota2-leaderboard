<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dota 2 Leaderboard Tracker</title>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <meta name="description" content="Track Dota 2 leaderboard & team changes over time across all regions">
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header" id="app-header">
      <div class="header-left">
        <img src="favicon.ico" alt="Logo" class="header-logo">
        <h1>Dota 2 Leaderboard Tracker</h1>
        <button class="header-about-btn" id="about-btn">About Me</button>
      </div>
      <div class="region-selector" id="region-selector">
        <button class="region-pill" data-region="americas">Americas</button>
        <button class="region-pill" data-region="europe">Europe</button>
        <button class="region-pill" data-region="sea">SE Asia</button>
        <button class="region-pill" data-region="china">China</button>
      </div>
    </header>

    <!-- Loading State -->
    <div id="loading" class="loading">
      <div class="spinner"></div>
      <p>Loading leaderboard history...</p>
    </div>

    <!-- Error State -->
    <div id="error" class="error hidden">
      <p>‚ö†Ô∏è Failed to load data. Please try again later.</p>
    </div>

    <!-- Main Content -->
    <main id="main-content" class="main-content hidden">
      <!-- Stats Cards -->
      <section class="stats-section" id="stats-section">
        <div class="stats-card winners" id="winners-card">
          <h2>
            <span>üìà Biggest Winners</span>
            <div class="scope-selects">
              <select id="time-scope" class="scope-select">
                <option value="1">24 Hours</option>
                <option value="7">Last Week</option>
                <option value="30">Last Month</option>
                <option value="180">Last 6 Months</option>
              </select>
              <select id="winners-scope" class="scope-select">
                <option value="10">Top 10</option>
                <option value="20">Top 20</option>
                <option value="50">Top 50</option>
                <option value="100">Top 100</option>
                <option value="200">Top 200</option>
                <option value="500">Top 500</option>
              </select>
            </div>
          </h2>
          <ul id="winners-list" class="stats-list"></ul>
        </div>
        <div class="stats-card losers" id="losers-card">
          <h2>
            <span>üìâ Biggest Losers</span>
            <div class="scope-selects">
              <select id="time-scope-losers" class="scope-select">
                <option value="1">24 Hours</option>
                <option value="7">Last Week</option>
                <option value="30">Last Month</option>
                <option value="180">Last 6 Months</option>
              </select>
              <select id="losers-scope" class="scope-select">
                <option value="10">Top 10</option>
                <option value="20">Top 20</option>
                <option value="50">Top 50</option>
                <option value="100">Top 100</option>
                <option value="200">Top 200</option>
                <option value="500">Top 500</option>
              </select>
            </div>
          </h2>
          <ul id="losers-list" class="stats-list"></ul>
        </div>
      </section>

      <!-- Favorites and Team Changes Row -->
      <div class="favorites-team-row">
        <!-- Favorites Tracking -->
        <section id="favorites-section" class="stats-card favorites-card hidden">
          <h2>
            <span>‚≠ê Tracked Players</span>
            <div class="scope-selects">
              <select id="favorites-time-scope" class="scope-select">
                <option value="1">24 Hours</option>
                <option value="7" selected>Last Week</option>
                <option value="30">Last Month</option>
                <option value="180">Last 6 Months</option>
              </select>
            </div>
          </h2>
          <ul id="favorites-list" class="stats-list"></ul>
        </section>

        <!-- Team Changes -->
        <section id="team-changes-section" class="team-changes-section hidden">
          <h3 class="team-changes-header">
            <span>üîÑ Team Changes <span id="team-changes-count"></span></span>
            <button id="team-changes-toggle" class="team-changes-toggle hidden" aria-label="Toggle team changes">
              <span class="chevron">‚ñº</span>
            </button>
          </h3>
          <div id="team-changes-list" class="team-changes-list"></div>
        </section>
      </div>

      <!-- Leaderboard -->
      <section class="leaderboard-section">
        <div class="leaderboard-header">
          <span class="col-rank">Rank</span>
          <span class="col-change">Œî</span>
          <span class="col-team">Team</span>
          <span class="col-name">Player</span>
          <span class="col-flag"></span>
          <span class="col-arrow"></span>
          <div class="header-buttons">
            <button id="teams-only-toggle" class="header-toggle" title="Show only players with teams">Pros Only</button>
            <button id="expand-toggle" class="expand-toggle" title="Toggle compact mode">‚Üó</button>
          </div>
        </div>
        <div id="leaderboard" class="leaderboard"></div>
      </section>

      <!-- Timeline -->
      <section class="timeline-section">
        <div class="timeline-controls">
          <button id="play-btn" class="control-btn" title="Play/Pause">‚ñ∂</button>
          <div class="speed-controls">
            <button class="speed-btn" data-speed="1">1x</button>
            <button class="speed-btn active" data-speed="2">2x</button>
            <button class="speed-btn" data-speed="5">5x</button>
          </div>
          <span id="current-time" class="current-time">Loading...</span>
        </div>
        <div class="timeline-slider-container">
          <input type="range" id="timeline-slider" class="timeline-slider" min="0" max="100" value="100">
          <div class="timeline-labels">
            <span id="timeline-start"></span>
            <span class="timeline-hint">Use ‚Üê ‚Üí arrow keys and spacebar to navigate</span>
            <span id="timeline-end"></span>
          </div>
        </div>
      </section>
    </main>

    <!-- About Modal -->
    <div id="about-modal" class="modal hidden">
      <div class="modal-content about-modal-content">
        <button class="modal-close" id="about-modal-close">&times;</button>
        <div class="about-modal-body">
          <h2>About me</h2>
          
          <div class="support-section">
            <p>
              You may know me from such classics as "Dota 2 Silent Stream until patch drops", "Dota 2 winrate increaser (hoho-haha)", Super Smash Bros chrome extensions, to name a few. Maybe you've seen me in your pubs, or perhaps you're one of the 500k+ people I've reached on StackOverflow helping people with their game development questions. <br />
              Regardless, I'm a passionate developer and lifelong gamer who has loved Dota since I started playing it about 18 years ago. <br /><br />

              I love making things for this community & game, and this project is one of those things. <br />

              If you appreciate the work, be a life-changer and consider supporting me via the link below. <br /><br />

              Every bit helps me dedicate more time to projects like this one, and to give back to you & the community!
            </p>
            <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="maakep" data-color="#23a300" data-emoji="üê∏"  data-font="Cookie" data-text="Make my day" data-outline-color="#ffffff" data-font-color="#ffffff" data-coffee-color="#FFDD00" ></script>
          </div>
        </div>
      </div>
    </div>

    <!-- Player Modal -->
    <div id="player-modal" class="modal hidden">
      <div class="modal-content">
        <button class="modal-close" id="modal-close">&times;</button>
        <div class="modal-header">
          <div class="modal-title-row">
            <button id="modal-favorite-btn" class="favorite-btn" title="Add to favorites">
              <span class="star">‚òÖ</span>
            </button>
            <h2 id="modal-player-name"></h2>
          </div>
          <span id="modal-player-team" class="modal-team"></span>
        </div>
        <div class="modal-stats">
          <div class="modal-stat">
            <span class="stat-label">Current Rank</span>
            <span id="modal-current-rank" class="stat-value"></span>
          </div>
          <div class="modal-stat">
            <span class="stat-label">Best Rank</span>
            <span id="modal-best-rank" class="stat-value"></span>
          </div>
          <div class="modal-stat">
            <span class="stat-label">Worst Rank</span>
            <span id="modal-worst-rank" class="stat-value"></span>
          </div>
          <div class="modal-stat">
            <span class="stat-label">Total Change</span>
            <span id="modal-total-change" class="stat-value"></span>
          </div>
        </div>
        <div class="modal-chart-container">
          <canvas id="player-chart"></canvas>
        </div>
        <div id="modal-team-history" class="modal-team-history hidden">
          <h3>Team History</h3>
          <ul id="modal-team-history-list" class="team-history-list"></ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/favorites.js"></script>
  <script src="js/stats.js"></script>
  <script src="js/leaderboard.js"></script>
  <script src="js/timeline.js"></script>
  <script src="js/player-modal.js"></script>
  <script src="js/app.js"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-X8RP9NY768"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-X8RP9NY768');
  </script>
</body>
</html>
